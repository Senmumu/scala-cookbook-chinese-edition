# 前言

 这是一本针对Scala的相关问题解决方法的烹饪书，Scala 是我使用过的最有趣的编程语言。这本书包括了超过250中经常性的问题的解决方法，展示了超过700种的可能示例。(我并没有数，但我觉得数目是对的)

这本书有一些独一无二的特性 ：

- 作为一本cookbook，它试图通过提供一些解决方法，来节省你花在那些经常性问题上的时间（节约你的生命）。
- 几乎所有的示例都展示在 Scala 解释器（Scala interpreter）中，因此，无论你是坐在电脑旁，或是飞机上，或者窝在你最爱的躺椅上阅读，你都可以看到准确的输出结果（大概是这样的：“啊，原来是这样作用的！”）
- 这本书不仅包括Scala语言，也有大幅篇章讲解Scala的工具（tools）和包（packages），包括SBT，actors，一个库合集（超过100种包），以及json处理。

在这本书出版之前，这本书覆盖到 Scala 2.10.x版本和 SBT 0.12.3版本。

# Scala 语言

我对Scala的（非常简单的层面上）看法是，它是一个Ruby和Java的后代。它轻量、简洁、像Ruby一样可阅读。但是它将你项目里的类文件编译成JAR文件，并在JVM上运行；它使用特性萃取技术（traits）和混合模式（mixins），感觉上像动态语言。但是它是静态类型的语言。它使用 Actor模型简化并行程序，因此你可以让多核心处理器运转自如。Scala这个名字来自单词 scalable（可伸缩的，可扩展的），正如这个名字一样，它被用于驱动世界上最繁忙的网站，包括Twitter, Netflix, Tumblr, LinkedIn, Foursquare等等。

在我看来，Scala并不能当作编程入门班上的一个好的教学语言。相反，它是由专业级程序开发者创造的强大语言。但你也不必害怕。如果你是我自己的兄弟，你要去开始一个新项目，并且你可以随心所欲选择编程语言，我一定毫不犹豫的说：“用Scala吧。”

这里是一些Scala的闪光点：

- 它是一个由Martin Odersky（javac之父）创造的现代编程语言。受到了Java, Ruby, Smalltalk, ML, Haskell, Erlang以及其他语言的影响。
- 它是一个纯粹的面向对象（OOP）语言，每个变量都是对象，每个运算符（operator）都是方法。
- 它也是一门函数式编程（FP）语言，所以你可以把函数当作变量传来传去。你可以以OOP方法编写你的代码，也可以以FP方法，或者混合起来用。
- Scala代码在JVM上运行，使得你可以使用经过多年开发的丰富的Java库。
- 你可以第一天就产出颇丰，但是这门语言水很深，所以当你持续编写、学习，你会不停找到更新的、更好的方法写代码。Scala将会改变你对编程的看法——而这是件好事情。

在所有的Scala的优点中，我最喜欢的是它可以让你编写简洁的、易于阅读的代码。而据说程序员花在阅读代码上的时间与写代码的时间点比例至少是10:1，因此写出简洁、易于阅读的代码至关重要。因为Scala拥有以上这些特性，程序员们都说它是富有表现力的（*expressive*）。

# 解决方法

我经常购买 O’Reilly cookbooks以寻找一些解决方法，这正是这本书所关注的：解决问题。

每当使用一本cookbook时，我经常会想：“我有一个这样的问题：我需要迭代一个数组（Array）中的元素，最好的方法是什么？”，我想应该去查看元素内容，找到一个诀窍，实现解决方法，然后继续前进。我还试图记住这个案例的每个方法。

然而，像Scala这样的现代语言，它能终结我关于这个问题的表述的错误。基于我之前的编程经验，我可能会想：“我需要迭代一个数组里的元素。”但是现实情况下，我更深的意图是，基于某个目的而遍历这些元素，比如将元素转换到新的集合里。所以一个好的诀窍是：“嘿，我知道你这里是想了解怎样遍历一个数组中的元素，这里是你的方案”：
```scala
    for (i <- Array(1,2,3)) println(i)
```
"但是，如果你其实是想将这些元素转换到新的集合里，你需要的是一个 for/yield 表达式，或者 map方法。"
```scala
    // for/yield
    scala> for (i <- Array(1,2,3)) yield i * 2 
    res0: Array[Int] = Array(2, 4, 6)
    
    // map
    scala> Array(1,2,3).map(_ * 2) 
    res1: Array[Int] = Array(2, 4, 6)
```
（_是占位符）<!--此处存疑 原文是 More on that _ character shortly.-->

要编写这个关于遇到的问题和解决方法的清单，我遵循 Eat your own dog food（自己的产品自己也要用）哲学。

书中这些方法来自于我自己编写Scala代码、互联网应用、网络服务、以及基于Actor的系统的经验。当我开发我需要的应用时，我遇到过以下这些问题：

- Scala文件往往很小；有什么恰当的方式去组织一个应用？
- 看起来SBT是Scala最棒的编译工具，但是它与Ant和Maven不一样，那我要怎样编译和打包应用，以及处理各种依赖关系？
- Scala的构造函数（Constructors）与Java的区别真的很大，我该怎样创建它们？当我声明构造函数参数和类的字段时生成了怎样的代码？
- Actors模型很酷，那我该怎样编写一个完全基于Actor的应用？
- 什么？我不应该再使用 null了？为什么？！没有它们我该怎样写代码？
- 我可以把函数像其他任何变量一样传递？我该怎样做？这样做有什么好处？
